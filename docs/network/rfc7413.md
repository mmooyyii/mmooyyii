##### 声明: 本人不保证本文档的准确性.

### TCP Fast open

#### 摘要

本文描述了一种叫做TCP Fast Open(TFO)的实验性TCP机制. TFPO允许在SYN和SYN-ACK数据包中携带数据,并在TCP握手的接收期间被使用. 与标准的TCP相比, 可以节省往返时间(RTT)的时间.
标准TCP需要在数据交换前完成三次握手(3WHS). 然而,TFO偏离了标准TCP的语义, 因为在某些情况下, syn中的数据可能被重放给一个应用程序. 除非能接受这个问题, 否则不应该使用TFO,详见适用性部分.

```
Copyright Notice
 Copyright (c) 2014 IETF Trust and the persons identified as the
 document authors. All rights reserved.
 This document is subject to BCP 78 and the IETF Trust’s Legal
 Provisions Relating to IETF Documents
 (http://trustee.ietf.org/license-info) in effect on the date of
 publication of this document. Please review these documents
 carefully, as they describe your rights and restrictions with respect
 to this document. Code Components extracted from this document must
 include Simplified BSD License text as described in Section 4.e of
 the Trust Legal Provisions and are provided without warranty as
 described in the Simplified BSD License.
```

##### 1. 简介

TCP Fast Open(TFO)是一个对TCP的实验性更新, 它是数据在TCP握手期间被安全地交换. 本文档描述了一种设计,它使应用程序能够节省一个往返时间(RTT),同时避免了对服务安全的影响. 在TFO的初始化连接阶段,
服务端对客户端的验证中,使用了一种安全的cookie, 这是TFO的核心. 本文档覆盖了TCP初始握手期间交换数据的细节, TFO cookie的协议, 潜在的安全漏洞以及缓解方案, 以及新的socket API.

TFO被发明的动机是如今网络应用的性能. 当前的TCP只能在三次握手(3WHS)后传输数据, 这带来了一次RTT的网络延迟. 对于短连接的网络传输来说,这个RTT是整个网络延迟的显著的一部分,尤其是http短链接被广泛地使用的情况下.
举个例子, Chrome浏览器保持空闲的TCP最多5分钟 ,但是有35%的http请求会创建新的TCP连接. 对于类似的web或者web-like应用, 在SYN中附带数据可以显著地降低网络延迟. 下面我们详细描述如何解决我们会遇到的挑战.

##### 1.1 术语

##### 2. SYN中的数据

标准TCP协议在SYN包中携带数据, 但是禁止接收方从中接收数据到应用程序, 直到三次握手结束. 这是因为TCP初始握手是为了捕获旧的或者重复的SYN. 为了使应用程序能在TCP握手阶段交换数据,TFO允许数据在SYN包中被接收的限制.
这改变了TCP的语义,而且产生了2个问题(下面的章节讨论), 这使TFO不适用于某些应用程序. 因此TCP实现不能默认使用TFO,只有在应用程序明确要求的情况下才能使用. 具体适用性见第6章

##### 2.1 放宽TCP对于SYN重复语义的规定

TFO允许接收方在三次握手结束之前, 从中接收数据到应用程序. 所以出现下面2中情况任何一种都会出现数据完整性问题.   
a) 接收方主机收到重复的SYN中的数据, 当它在忘记收到原始SYN后(比如重启).   
b) 




